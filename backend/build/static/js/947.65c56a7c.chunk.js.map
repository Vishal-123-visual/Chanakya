{"version":3,"file":"static/js/947.65c56a7c.chunk.js","mappings":"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","sources":["app/pages/monthly_collection_fee/MonthlyCollectionFee.jsx"],"sourcesContent":["import {Link, useNavigate, useParams} from 'react-router-dom'\r\nimport {KTIcon, toAbsoluteUrl} from '../../../_metronic/helpers'\r\nimport {useStudentCourseFeesContext} from '../courseFees/StudentCourseFeesContext'\r\nimport React, {useState} from 'react'\r\n\r\nconst MonthlyCollectionFee = () => {\r\n  const ctx = useStudentCourseFeesContext()\r\n  const result = ctx.useGetStudentMonthlyCourseFeesCollection()\r\n  const paramsData = useParams()\r\n  //console.log(paramsData.id)\r\n  // console.log(result.data)\r\n  const [searchContentValues, setSearchContentValues] = useState({from: '', to: ''})\r\n  const [filteredData, setFilteredData] = useState([])\r\n  const [totalCollectionFees, setTotalCollectionFees] = useState(0)\r\n\r\n  const searchContentValueHandler = (e) => {\r\n    e.preventDefault()\r\n    const filteredResults = result.data.filter((data) => {\r\n      const createdAtMonth = new Date(data.expiration_date).getMonth() + 1\r\n      return (\r\n        createdAtMonth >= Number(searchContentValues.from) &&\r\n        createdAtMonth <= Number(searchContentValues.to)\r\n      )\r\n    })\r\n\r\n    //console.log(filteredResults)\r\n    setFilteredData(filteredResults)\r\n    calculateTotalCollectionFees(filteredResults)\r\n  }\r\n\r\n  const calculateTotalCollectionFees = (data) => {\r\n    const totalFees = data.reduce((total, item) => total + item?.installment_amount, 0)\r\n    setTotalCollectionFees(totalFees)\r\n  }\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const compareTimeInstallment = (t1) => {\r\n    let resDate = new Date(t1).getTime()\r\n    let currDate = new Date().getTime()\r\n\r\n    //console.log(resDate, currDate)\r\n\r\n    if (currDate > resDate) {\r\n      return 'Month Skipped'\r\n    } else {\r\n      // console.log(\r\n      //   Number(new Date(resDate).toString().split(' ')[2]),\r\n      //   Number(new Date(currDate).toString().split(' ')[2])\r\n      // )\r\n      return '0 Month Skipped'\r\n    }\r\n  }\r\n\r\n  // const compareTimeInstallment = (t1) => {\r\n  //   let resDate = new Date(t1)\r\n  //   let currDate = new Date()\r\n\r\n  //   // Get the month of the expiration date\r\n  //   let resMonth = resDate.getTime()\r\n\r\n  //   // Get the month of the current date\r\n  //   let currMonth = currDate.getTime()\r\n  //   console.log(currMonth > resMonth)\r\n\r\n  //   if (resMonth === currMonth) {\r\n  //     return '0 Month Skipped'\r\n  //   } else if (currMonth > resMonth) {\r\n  //     return 'Month Skipped'\r\n  //   } else {\r\n  //     return 'No Month Skipped'\r\n  //   }\r\n  // }\r\n\r\n  return (\r\n    <div className={`card`}>\r\n      {/* begin::Header */}\r\n      <div className='card-header border-0 pt-5'>\r\n        <h3 className='card-title align-items-start flex-column'>\r\n          <span className='card-label fw-bold fs-3 mb-1'>Monthly Collection</span>\r\n          <p className=' mt-1 fw-semibold fs-7'>\r\n            Total Collection Fees Rs :: {totalCollectionFees.toFixed(2)}\r\n          </p>\r\n        </h3>\r\n        <div className='d-flex justify-content-center align-items-center gap-5 '>\r\n          <label htmlFor='From'>\r\n            From{' '}\r\n            <select\r\n              value={searchContentValues.from}\r\n              onChange={(e) => setSearchContentValues((prev) => ({...prev, from: e.target.value}))}\r\n              type='text'\r\n              name='From'\r\n              id='From'\r\n              className='form-control w-auto'\r\n            >\r\n              <option value=''>select month</option>\r\n              {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((month) => (\r\n                <option key={month} value={month}>\r\n                  {(() => {\r\n                    switch (month) {\r\n                      case 1:\r\n                        return 'Jan'\r\n                      case 2:\r\n                        return 'Feb'\r\n                      case 3:\r\n                        return 'Mar'\r\n                      case 4:\r\n                        return 'Apr'\r\n                      case 5:\r\n                        return 'May'\r\n                      case 6:\r\n                        return 'Jun'\r\n                      case 7:\r\n                        return 'Jul'\r\n                      case 8:\r\n                        return 'Aug'\r\n                      case 9:\r\n                        return 'Sep'\r\n                      case 10:\r\n                        return 'Oct'\r\n                      case 11:\r\n                        return 'Nov'\r\n                      case 12:\r\n                        return 'Dec'\r\n                      default:\r\n                        return ''\r\n                    }\r\n                  })()}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </label>\r\n\r\n          <label htmlFor='To'>\r\n            To{' '}\r\n            <select\r\n              value={searchContentValues.to}\r\n              onChange={(e) => setSearchContentValues((prev) => ({...prev, to: e.target.value}))}\r\n              type='text'\r\n              name='To'\r\n              id='To'\r\n              className='form-control w-auto'\r\n            >\r\n              <option value=''>select month</option>\r\n              {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((month) => (\r\n                <option key={month} value={month}>\r\n                  {(() => {\r\n                    switch (month) {\r\n                      case 1:\r\n                        return 'Jan'\r\n                      case 2:\r\n                        return 'Feb'\r\n                      case 3:\r\n                        return 'Mar'\r\n                      case 4:\r\n                        return 'Apr'\r\n                      case 5:\r\n                        return 'May'\r\n                      case 6:\r\n                        return 'Jun'\r\n                      case 7:\r\n                        return 'Jul'\r\n                      case 8:\r\n                        return 'Aug'\r\n                      case 9:\r\n                        return 'Sep'\r\n                      case 10:\r\n                        return 'Oct'\r\n                      case 11:\r\n                        return 'Nov'\r\n                      case 12:\r\n                        return 'Dec'\r\n                      default:\r\n                        return ''\r\n                    }\r\n                  })()}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </label>\r\n\r\n          <button\r\n            onClick={searchContentValueHandler}\r\n            type='submit'\r\n            className='btn btn-sm btn-light-primary'\r\n          >\r\n            Search\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {/* end::Header */}\r\n      {/* begin::Body */}\r\n      <div className='card-body py-3'>\r\n        {/* begin::Table container */}\r\n        <div className='table-responsive'>\r\n          {/* begin::Table */}\r\n          <table className='table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4'>\r\n            {/* begin::Table head */}\r\n            <thead>\r\n              <tr className='fw-bold text-muted'>\r\n                <th className='w-25px'>\r\n                  <div className='form-check form-check-sm form-check-custom form-check-solid'></div>\r\n                </th>\r\n                <th className='min-w-150px'>Roll Number</th>\r\n                <th className='min-w-140px'>Name</th>\r\n                <th className='min-w-120px'>Course</th>\r\n                <th className='min-w-120px'>Time Avaiable</th>\r\n\r\n                <th className='min-w-100px text-end'>Contact</th>\r\n                <th className='min-w-100px text-end'>Installments</th>\r\n              </tr>\r\n            </thead>\r\n            {/* end::Table head */}\r\n            {/* begin::Table body */}\r\n            <tbody>\r\n              {filteredData.length === 0 ? (\r\n                <tr>\r\n                  <td></td>\r\n                  <td></td>\r\n                  <td></td>\r\n                  <td>\r\n                    <h2>Loading.....</h2>\r\n                  </td>\r\n                  <td></td>\r\n                  <td></td>\r\n                </tr>\r\n              ) : (\r\n                filteredData\r\n                  ?.filter(\r\n                    (companyDataId) => companyDataId?.studentInfo?.companyName === paramsData.id\r\n                  )\r\n                  .map((data) => (\r\n                    <React.Fragment key={data._id}>\r\n                      {data.studentInfo !== null && (\r\n                        <tr key={data._id}>\r\n                          <td>\r\n                            <div className='form-check form-check-sm form-check-custom form-check-solid'></div>\r\n                          </td>\r\n                          <td>\r\n                            <button\r\n                              className='btn btn-link'\r\n                              onClick={() =>\r\n                                navigate(`/student/${data.studentInfo._id}`, {\r\n                                  state: data.studentInfo,\r\n                                })\r\n                              }\r\n                            >\r\n                              {}\r\n                              {data?.studentInfo?.rollNumber}\r\n                            </button>\r\n                          </td>\r\n                          <td>{data?.studentInfo?.name}</td>\r\n\r\n                          <td>{data?.courseName?.courseName}</td>\r\n                          <td>{data.studentInfo?.installmentPaymentSkipMonth} Month Skipped</td>\r\n                          <td>\r\n                            <div className='d-flex justify-content-end flex-shrink-0'>\r\n                              {data?.studentInfo?.phone_number}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className='d-flex justify-content-end flex-shrink-0'>\r\n                              {data?.installment_amount.toFixed(2)}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n                    </React.Fragment>\r\n                  ))\r\n              )}\r\n            </tbody>\r\n            {/* end::Table body */}\r\n          </table>\r\n          {/* end::Table */}\r\n        </div>\r\n        {/* end::Table container */}\r\n      </div>\r\n      {/* end::Body */}\r\n      <div></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MonthlyCollectionFee\r\n"],"names":["result","useStudentCourseFeesContext","useGetStudentMonthlyCourseFeesCollection","paramsData","useParams","_useState","useState","from","to","_useState2","_slicedToArray","searchContentValues","setSearchContentValues","_useState3","_useState4","filteredData","setFilteredData","_useState5","_useState6","totalCollectionFees","setTotalCollectionFees","calculateTotalCollectionFees","data","totalFees","reduce","total","item","installment_amount","navigate","useNavigate","_jsxs","className","children","_jsx","toFixed","htmlFor","value","onChange","e","prev","_objectSpread","target","type","name","id","map","month","onClick","preventDefault","filteredResults","filter","createdAtMonth","Date","expiration_date","getMonth","Number","length","companyDataId","_companyDataId$studen","studentInfo","companyName","_data$studentInfo","_data$studentInfo2","_data$courseName","_data$studentInfo3","_data$studentInfo4","React","concat","_id","state","rollNumber","courseName","installmentPaymentSkipMonth","phone_number"],"sourceRoot":""}